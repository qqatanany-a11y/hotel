































import struct 

import dns .immutable 
import dns .rdtypes .mxbase 


@dns .immutable .immutable 
class A (dns .rdata .Rdata ):
    """A record for Chaosnet"""




    __slots__ =["domain","address"]

    def __init__ (self ,rdclass ,rdtype ,domain ,address ):
        super ().__init__ (rdclass ,rdtype )
        self .domain =self ._as_name (domain )
        self .address =self ._as_uint16 (address )

    def to_text (self ,origin =None ,relativize =True ,**kw ):
        domain =self .domain .choose_relativity (origin ,relativize )
        return f"{domain} {self.address:o}"

    @classmethod 
    def from_text (
    cls ,rdclass ,rdtype ,tok ,origin =None ,relativize =True ,relativize_to =None 
    ):
        domain =tok .get_name (origin ,relativize ,relativize_to )
        address =tok .get_uint16 (base =8 )
        return cls (rdclass ,rdtype ,domain ,address )

    def _to_wire (self ,file ,compress =None ,origin =None ,canonicalize =False ):
        self .domain .to_wire (file ,compress ,origin ,canonicalize )
        pref =struct .pack ("!H",self .address )
        file .write (pref )

    @classmethod 
    def from_wire_parser (cls ,rdclass ,rdtype ,parser ,origin =None ):
        domain =parser .get_name (origin )
        address =parser .get_uint16 ()
        return cls (rdclass ,rdtype ,domain ,address )
